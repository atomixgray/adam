<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ciao - Italian Practice</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <canvas id="particles"></canvas>
    
    <!-- Login Screen -->
    <div id="login-screen" class="login-screen">
        <div class="login-container">
            <h1>Ciao</h1>
            <p class="subtitle">Italian Practice Hub</p>
            <form id="login-form" class="login-form">
                <input 
                    type="password" 
                    id="password-input" 
                    placeholder="Enter password"
                    autocomplete="off"
                    required
                />
                <button type="submit" class="login-btn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M13.8 12H3"/>
                    </svg>
                    Enter
                </button>
            </form>
            <p class="login-hint">Hint: It's a simple Italian greeting üòâ</p>
        </div>
    </div>

    <!-- Main App -->
    <div id="main-app" class="container" style="display: none;">
        <header>
            <h1>Ciao</h1>
            <p class="subtitle">Practice Italian with Purpose</p>
            
            <div class="mode-selector">
                <button class="mode-btn active" data-mode="builder">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                        <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                        <path d="M2 2l7.586 7.586"/>
                    </svg>
                    Sentence Builder
                </button>
                <button class="mode-btn" data-mode="conversation">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                    </svg>
                    Conversation
                </button>
            </div>
        </header>

        <!-- Sentence Builder Mode -->
        <div id="builder-mode" class="mode-content">
            <div class="controls">
                <button class="control-btn" id="new-prompt-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                    </svg>
                    New Prompt
                </button>
                <div class="level-selector">
                    <select id="level-select" class="level-dropdown">
                        <option value="A0">A0 - Beginner</option>
                        <option value="A1">A1 - Elementary</option>
                        <option value="A2">A2 - Pre-Intermediate</option>
                        <option value="B1">B1 - Intermediate</option>
                        <option value="B2">B2 - Upper Intermediate</option>
                    </select>
                </div>
            </div>

            <div class="builder-container">
                <div class="prompt-card">
                    <div class="prompt-label">Your Challenge</div>
                    <div id="prompt-text" class="prompt-text">Loading...</div>
                    <div class="prompt-meta">
                        <span id="tense-label" class="tense-badge">Present</span>
                        <span id="difficulty-label" class="difficulty-badge">A0</span>
                    </div>
                </div>

                <div class="answer-area">
                    <textarea 
                        id="answer-input" 
                        placeholder="Type your sentence in Italian..."
                        rows="4"
                    ></textarea>
                    <button id="check-answer-btn" class="check-btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        Check Answer
                    </button>
                </div>

                <div id="feedback-area" class="feedback-area" style="display: none;">
                    <div class="feedback-content"></div>
                    <button id="try-again-btn" class="try-again-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                        </svg>
                        Try Another
                    </button>
                </div>
            </div>
        </div>

        <!-- Conversation Mode -->
        <div id="conversation-mode" class="mode-content" style="display: none;">
            <div class="controls">
                <button class="control-btn control-btn-reset" id="clear-chat-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    </svg>
                    Clear Chat
                </button>
                <div class="scenario-selector">
                    <select id="scenario-select" class="level-dropdown">
                        <option value="casual">Casual Chat</option>
                        <option value="restaurant">At a Restaurant</option>
                        <option value="directions">Asking Directions</option>
                        <option value="shopping">Shopping</option>
                        <option value="hotel">At a Hotel</option>
                        <option value="doctor">At the Doctor</option>
                    </select>
                </div>
            </div>

            <div class="chat-container">
                <div id="chat-messages" class="chat-messages">
                    <div class="chat-message ai-message">
                        <div class="message-avatar">ü§ñ</div>
                        <div class="message-content">
                            <div class="message-text">Ciao! Come stai? Sono qui per aiutarti a praticare l'italiano.</div>
                        </div>
                    </div>
                </div>

                <div class="chat-input-area">
                    <textarea 
                        id="chat-input" 
                        placeholder="Rispondi in italiano..."
                        rows="2"
                    ></textarea>
                    <button id="send-message-btn" class="send-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"/>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="api-key-status">
                <span id="api-status-text">No API key set</span>
                <button id="set-api-key-btn" class="small-btn">Set Key</button>
            </div>
        </div>

        <footer>
            <a href="../" class="back-link">‚Üê Back to Main Site</a>
        </footer>
    </div>

    <!-- API Key Modal -->
    <div id="api-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>Set Anthropic API Key</h3>
            <p class="modal-description">Your API key is stored locally in your browser and never sent anywhere except to Anthropic.</p>
            <input 
                type="password" 
                id="api-key-input" 
                placeholder="sk-ant-..."
                autocomplete="off"
            />
            <div class="modal-actions">
                <button id="save-api-key-btn" class="modal-btn modal-btn-primary">Save</button>
                <button id="cancel-api-key-btn" class="modal-btn">Cancel</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
